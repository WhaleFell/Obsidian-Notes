<!DOCTYPE HTML>
<html lang="cn" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Python-Generator-Iterator-decorater - WhaleFall Obsidian Notes</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="Keep Notes everyday">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../../favicon.svg">
        <link rel="shortcut icon" href="../../../favicon.png">
        <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
        <link rel="stylesheet" href="../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../../index.html"><strong aria-hidden="true">1.</strong> 落落的Notes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../SUMMARY.html"><strong aria-hidden="true">1.1.</strong> SUMMARY</a></li><li class="chapter-item expanded "><a href="../../../test/index.html"><strong aria-hidden="true">1.2.</strong> test</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../test/Obsidian-Hexo-模板测试.html"><strong aria-hidden="true">1.2.1.</strong> Obsidian-Hexo-模板测试</a></li><li class="chapter-item expanded "><a href="../../../test/思源笔记自动同步测试.html"><strong aria-hidden="true">1.2.2.</strong> 思源笔记自动同步测试</a></li><li class="chapter-item expanded "><a href="../../../test/落落-OpenWRT-导航页.html"><strong aria-hidden="true">1.2.3.</strong> 落落-OpenWRT-导航页</a></li></ol></li><li class="chapter-item expanded "><a href="../../../English-Study/index.html"><strong aria-hidden="true">1.3.</strong> English-Study</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../English-Study/英语音标学习.html"><strong aria-hidden="true">1.3.1.</strong> 英语音标学习</a></li></ol></li><li class="chapter-item expanded "><a href="../../../Study/index.html"><strong aria-hidden="true">1.4.</strong> Study</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../Study/Chemistry/index.html"><strong aria-hidden="true">1.4.1.</strong> Chemistry</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../Study/Chemistry/第一讲-离子反应的基础概念.html"><strong aria-hidden="true">1.4.1.1.</strong> 第一讲-离子反应的基础概念</a></li></ol></li><li class="chapter-item expanded "><a href="../../../Study/Physical/index.html"><strong aria-hidden="true">1.4.2.</strong> Physical</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../Study/Physical/第六讲.html"><strong aria-hidden="true">1.4.2.1.</strong> 第六讲</a></li><li class="chapter-item expanded "><a href="../../../Study/Physical/第一讲-运动的描述.html"><strong aria-hidden="true">1.4.2.2.</strong> 第一讲-运动的描述</a></li><li class="chapter-item expanded "><a href="../../../Study/Physical/第二讲-比例问题.html"><strong aria-hidden="true">1.4.2.3.</strong> 第二讲-比例问题</a></li><li class="chapter-item expanded "><a href="../../../Study/Physical/第5讲-力的正交分解.html"><strong aria-hidden="true">1.4.2.4.</strong> 第5讲-力的正交分解</a></li><li class="chapter-item expanded "><a href="../../../Study/Physical/第7讲.html"><strong aria-hidden="true">1.4.2.5.</strong> 第7讲</a></li></ol></li><li class="chapter-item expanded "><a href="../../../Study/Math/index.html"><strong aria-hidden="true">1.4.3.</strong> Math</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../Study/Math/第一讲-集合与常用逻辑用语.html"><strong aria-hidden="true">1.4.3.1.</strong> 第一讲-集合与常用逻辑用语</a></li><li class="chapter-item expanded "><a href="../../../Study/Math/函数.html"><strong aria-hidden="true">1.4.3.2.</strong> 函数</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../碎碎念/index.html"><strong aria-hidden="true">1.5.</strong> 碎碎念</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../碎碎念/闲鱼文案模板.html"><strong aria-hidden="true">1.5.1.</strong> 闲鱼文案模板</a></li><li class="chapter-item expanded "><a href="../../../碎碎念/奇思妙想.html"><strong aria-hidden="true">1.5.2.</strong> 奇思妙想</a></li><li class="chapter-item expanded "><a href="../../../碎碎念/猫猫.html"><strong aria-hidden="true">1.5.3.</strong> 猫猫</a></li><li class="chapter-item expanded "><a href="../../../碎碎念/福芝talk.html"><strong aria-hidden="true">1.5.4.</strong> 福芝talk</a></li><li class="chapter-item expanded "><a href="../../../碎碎念/freedom.html"><strong aria-hidden="true">1.5.5.</strong> freedom</a></li><li class="chapter-item expanded "><a href="../../../碎碎念/知乎精选.html"><strong aria-hidden="true">1.5.6.</strong> 知乎精选</a></li><li class="chapter-item expanded "><a href="../../../碎碎念/记录.html"><strong aria-hidden="true">1.5.7.</strong> 记录</a></li><li class="chapter-item expanded "><a href="../../../碎碎念/文案.html"><strong aria-hidden="true">1.5.8.</strong> 文案</a></li><li class="chapter-item expanded "><a href="../../../碎碎念/思源笔记本使用感想.html"><strong aria-hidden="true">1.5.9.</strong> 思源笔记本使用感想</a></li><li class="chapter-item expanded "><a href="../../../碎碎念/猫猫/index.html"><strong aria-hidden="true">1.5.10.</strong> 猫猫</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../碎碎念/猫猫/多多.html"><strong aria-hidden="true">1.5.10.1.</strong> 多多</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../博客文章/index.html"><strong aria-hidden="true">1.6.</strong> 博客文章</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../博客文章/博客文章_post.html"><strong aria-hidden="true">1.6.1.</strong> 博客文章_post</a></li><li class="chapter-item expanded "><a href="../../../博客文章/博客文章测试.html"><strong aria-hidden="true">1.6.2.</strong> 博客文章测试</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/index.html"><strong aria-hidden="true">1.6.3.</strong> _posts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../博客文章/_posts/openwrt-lede-build-notes.html"><strong aria-hidden="true">1.6.3.1.</strong> openwrt-lede-build-notes</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Rpi-1.html"><strong aria-hidden="true">1.6.3.2.</strong> Rpi-1</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Kali-Linux-Help.html"><strong aria-hidden="true">1.6.3.3.</strong> Kali-Linux-Help</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/openwebrx-sdr.html"><strong aria-hidden="true">1.6.3.4.</strong> openwebrx-sdr</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Linux-iptables.html"><strong aria-hidden="true">1.6.3.5.</strong> Linux-iptables</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Rpi-3.html"><strong aria-hidden="true">1.6.3.6.</strong> Rpi-3</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Samba4-config.html"><strong aria-hidden="true">1.6.3.7.</strong> Samba4-config</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Depression-medicine.html"><strong aria-hidden="true">1.6.3.8.</strong> Depression-medicine</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Rpi-2.html"><strong aria-hidden="true">1.6.3.9.</strong> Rpi-2</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Server-all.html"><strong aria-hidden="true">1.6.3.10.</strong> Server-all</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Hexo-blog-format.html"><strong aria-hidden="true">1.6.3.11.</strong> Hexo-blog-format</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/radio-SWshort.html"><strong aria-hidden="true">1.6.3.12.</strong> radio-SWshort</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Freedom-network.html"><strong aria-hidden="true">1.6.3.13.</strong> Freedom-network</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/clash-proxy-guide.html"><strong aria-hidden="true">1.6.3.14.</strong> clash-proxy-guide</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/onedrive-guide.html"><strong aria-hidden="true">1.6.3.15.</strong> onedrive-guide</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Linux-note.html"><strong aria-hidden="true">1.6.3.16.</strong> Linux-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Github-workflow.html"><strong aria-hidden="true">1.6.3.17.</strong> Github-workflow</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Vim-config.html"><strong aria-hidden="true">1.6.3.18.</strong> Vim-config</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Wky-help.html"><strong aria-hidden="true">1.6.3.19.</strong> Wky-help</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/index.html"><strong aria-hidden="true">1.6.3.20.</strong> Golang</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-interface-note.html"><strong aria-hidden="true">1.6.3.20.1.</strong> Golang-interface-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-envbuild-note.html"><strong aria-hidden="true">1.6.3.20.2.</strong> Golang-envbuild-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-datatype-note.html"><strong aria-hidden="true">1.6.3.20.3.</strong> Golang-datatype-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-package-note.html"><strong aria-hidden="true">1.6.3.20.4.</strong> Golang-package-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-HTML-note.html"><strong aria-hidden="true">1.6.3.20.5.</strong> Golang-HTML-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-struct-note.html"><strong aria-hidden="true">1.6.3.20.6.</strong> Golang-struct-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-JSON-note.html"><strong aria-hidden="true">1.6.3.20.7.</strong> Golang-JSON-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-variable-note.html"><strong aria-hidden="true">1.6.3.20.8.</strong> Golang-variable-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-method-note.html"><strong aria-hidden="true">1.6.3.20.9.</strong> Golang-method-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-note-catalogue.html"><strong aria-hidden="true">1.6.3.20.10.</strong> Golang-note-catalogue</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-function-note.html"><strong aria-hidden="true">1.6.3.20.11.</strong> Golang-function-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-goruntine-note.html"><strong aria-hidden="true">1.6.3.20.12.</strong> Golang-goruntine-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-project-and-gomod-note.html"><strong aria-hidden="true">1.6.3.20.13.</strong> Golang-project-and-gomod-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-pointer-note.html"><strong aria-hidden="true">1.6.3.20.14.</strong> Golang-pointer-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-id-note.html"><strong aria-hidden="true">1.6.3.20.15.</strong> Golang-id-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-const-note.html"><strong aria-hidden="true">1.6.3.20.16.</strong> Golang-const-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-map-note.html"><strong aria-hidden="true">1.6.3.20.17.</strong> Golang-map-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-type-keyword-note.html"><strong aria-hidden="true">1.6.3.20.18.</strong> Golang-type-keyword-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-error-note.html"><strong aria-hidden="true">1.6.3.20.19.</strong> Golang-error-note</a></li></ol></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Study/index.html"><strong aria-hidden="true">1.6.3.21.</strong> Study</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Study/Zhongkao-maths.html"><strong aria-hidden="true">1.6.3.21.1.</strong> Zhongkao-maths</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Study/Ancient-poems.html"><strong aria-hidden="true">1.6.3.21.2.</strong> Ancient-poems</a></li></ol></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Python/index.html"><strong aria-hidden="true">1.6.3.22.</strong> Python</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Python/Python-async.html"><strong aria-hidden="true">1.6.3.22.1.</strong> Python-async</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Python/Python-Tkinter-GUI.html"><strong aria-hidden="true">1.6.3.22.2.</strong> Python-Tkinter-GUI</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Python/Python-Generator-Iterator-decorater.html" class="active"><strong aria-hidden="true">1.6.3.22.3.</strong> Python-Generator-Iterator-decorater</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Python/Flask-Web-note.html"><strong aria-hidden="true">1.6.3.22.4.</strong> Flask-Web-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Python/Python-Concurrent.html"><strong aria-hidden="true">1.6.3.22.5.</strong> Python-Concurrent</a></li></ol></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../高中事件/index.html"><strong aria-hidden="true">1.7.</strong> 高中事件</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../高中事件/举报信.html"><strong aria-hidden="true">1.7.1.</strong> 举报信</a></li><li class="chapter-item expanded "><a href="../../../高中事件/举报中小学教师违规方法论.html"><strong aria-hidden="true">1.7.2.</strong> 举报中小学教师违规方法论</a></li><li class="chapter-item expanded "><a href="../../../高中事件/举报法律依据.html"><strong aria-hidden="true">1.7.3.</strong> 举报法律依据</a></li></ol></li><li class="chapter-item expanded "><a href="../../../CutBoard/index.html"><strong aria-hidden="true">1.8.</strong> CutBoard</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../CutBoard/无线电爬取脚本.html"><strong aria-hidden="true">1.8.1.</strong> 无线电爬取脚本</a></li></ol></li><li class="chapter-item expanded "><a href="../../../other/index.html"><strong aria-hidden="true">1.9.</strong> other</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../other/OPENAI-KEY.html"><strong aria-hidden="true">1.9.1.</strong> OPENAI-KEY</a></li><li class="chapter-item expanded "><a href="../../../other/模拟飞行.html"><strong aria-hidden="true">1.9.2.</strong> 模拟飞行</a></li><li class="chapter-item expanded "><a href="../../../other/写给v友的一段话.html"><strong aria-hidden="true">1.9.3.</strong> 写给v友的一段话</a></li><li class="chapter-item expanded "><a href="../../../other/未命名.html"><strong aria-hidden="true">1.9.4.</strong> 未命名</a></li></ol></li><li class="chapter-item expanded "><a href="../../../业余无线电Ham/index.html"><strong aria-hidden="true">1.10.</strong> 业余无线电Ham</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../业余无线电Ham/广播.html"><strong aria-hidden="true">1.10.1.</strong> 广播</a></li><li class="chapter-item expanded "><a href="../../../业余无线电Ham/附近航空频率.html"><strong aria-hidden="true">1.10.2.</strong> 附近航空频率</a></li><li class="chapter-item expanded "><a href="../../../业余无线电Ham/泉盛-K5-音质优化.html"><strong aria-hidden="true">1.10.3.</strong> 泉盛-K5-音质优化</a></li><li class="chapter-item expanded "><a href="../../../业余无线电Ham/业余无线电笔记.html"><strong aria-hidden="true">1.10.4.</strong> 业余无线电笔记</a></li><li class="chapter-item expanded "><a href="../../../业余无线电Ham/Opengd77-Firmware-教程.html"><strong aria-hidden="true">1.10.5.</strong> Opengd77-Firmware-教程</a></li><li class="chapter-item expanded "><a href="../../../业余无线电Ham/通联日志.html"><strong aria-hidden="true">1.10.6.</strong> 通联日志</a></li><li class="chapter-item expanded "><a href="../../../业余无线电Ham/业余无线电采购.html"><strong aria-hidden="true">1.10.7.</strong> 业余无线电采购</a></li><li class="chapter-item expanded "><a href="../../../业余无线电Ham/广播/index.html"><strong aria-hidden="true">1.10.8.</strong> 广播</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../业余无线电Ham/广播/广播收听报告-2023.05.23.html"><strong aria-hidden="true">1.10.8.1.</strong> 广播收听报告-2023.05.23</a></li></ol></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">WhaleFall Obsidian Notes</h1>

                    <div class="right-buttons">
                        <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <hr />
<p>title: Python 迭代器生成器修饰器
date: 2021-08-18 19:37:48
updated: 2021-08-18 19:37:48
categories: Python
tags: [Python, Coding]
description: Python 迭代器生成器修饰器,Python 中三大名器的完全总结！个人总结，算是比较详细的了。
thumbnail: http://oss.whaleluo.top/blog/old/20210630201524.png
banner_img: http://oss.whaleluo.top/blog/old/20210630201524.png</p>
<hr />
<h1 id="python-generator-iterator-decorater"><a class="header" href="#python-generator-iterator-decorater">Python-Generator-Iterator-decorater</a></h1>
<h2 id="迭代器"><a class="header" href="#迭代器">迭代器</a></h2>
<blockquote>
<p><strong>迭代器</strong>指的是迭代取值的工具，迭代是一个重复的过程，并且每次重复都是基于上一次的结果而继续的，</p>
<p>单纯的重复并不是迭代!</p>
</blockquote>
<ol>
<li>
<p>可迭代对象</p>
<p>元组; 列表; 字典; 集合; 字符串等</p>
<p>生成器.</p>
</li>
<li>
<p>用 for 循环迭代</p>
</li>
<li>
<p>验证一个东西是否可迭代</p>
<blockquote>
<p><strong>可迭代不一定是迭代对象</strong></p>
<p>(列表不是可迭代对象,但是可迭代.)</p>
</blockquote>
<pre><code class="language-python">from collections import Iterable
# 判断是否是可迭代对象(迭代器)
isinstance(&quot;adb&quot;,Iterable) # instance:实例
</code></pre>
</li>
<li>
<p>生成器可迭代,但可以迭代的不一定是生成器</p>
</li>
<li>
<p><code>iter()</code> 可以将列表变成可迭代对象</p>
</li>
</ol>
<h3 id="迭代器的作用"><a class="header" href="#迭代器的作用">迭代器的作用</a></h3>
<p>迭代器是用来<strong>迭代取值</strong>的工具，而涉及到把多个值循环取出来的类型</p>
<blockquote>
<p>有：列表、字符串、元组、字典、集合、打开文件</p>
</blockquote>
<pre><code class="language-python">l = ['egon', 'liu', 'alex']
i = 0
while i &lt; len(l):
    print(l[i])
    i += 1
</code></pre>
<p>上述<strong>迭代取值的方式</strong>只适用于<strong>有索引</strong>的数据类型：<strong>列表、字符串、元组.</strong><br />
为了解决基于索引迭代器取值的局限性<br />
python 必须提供一种能够不<strong>依赖于索引的取值方式</strong>，这就是<strong>迭代器</strong>.</p>
<h3 id="迭代器详解"><a class="header" href="#迭代器详解">迭代器详解</a></h3>
<p>但凡内置有 <code>__iter__()</code> 方法的对象都称之为<strong>可迭代的对象</strong>:</p>
<pre><code class="language-python">s1=''
s1.__iter__()

l=[]
l.__iter__()

t=(1,)
t.__iter__()

d={'a':1}
d.__iter__()

set1={1,2,3}
set1.__iter__()

with open('a.txt',mode='w') as f:
    f.__iter__()
    pass
</code></pre>
<p><strong>迭代器对象</strong>:</p>
<p>内置有 <code>__next__</code> 方法并且内置有 <code>__iter__</code> 方法的对象<br />
迭代器对象 <code>__next()__</code>：得到迭代器的下一个值.<br />
迭代器对象 <code>__iter__()</code>：得到迭代器的本身，调用和没调用相同.</p>
<pre><code class="language-python">d={'a':1,'b':2,'c':3}
d_iterator=d.__iter__()
print(d_iterator)    # &lt;dict_keyiterator object at 0x0000022FF0E13A90&gt;

print(d_iterator.__next__()) # a
print(d_iterator.__next__()) # b
print(d_iterator.__next__()) # c
print(d_iterator.__next__()) # 抛出异常StopIteration,值取完了
d={'a':1,'b':2,'c':3}
d_iterator=d.__iter__()

while True:
    try:
        print(d_iterator.__next__())
    except StopIteration:
        break
# 得到&quot;a&quot;,&quot;b&quot;,&quot;c&quot;
print('====&gt;&gt;&gt;&gt;&gt;&gt;') # 在一个迭代器取值取完后，再对其取值就会报错
d_iterator=d.__iter__()
while True:
    try:
        print(d_iterator.__next__())
    except StopIteration:
        break
# 什么都得不到,因为迭代器值已取完


l=[1,2,3,4,5]
l_iterator=l.__iter__()

while True:
    try:
        print(l_iterator.__next__())
    except StopIteration:
        break
# 得到1,2,3,4,5
</code></pre>
<p>常见<strong>数据类型</strong>的分类:</p>
<blockquote>
<p>可迭代对象：<strong>字符串、列表、元组、字典、集合、文件对象</strong><br />
迭代器对象：<strong>文件对象</strong></p>
</blockquote>
<pre><code class="language-python">s1=''
s1.__iter__()

l=[]
l.__iter__()

t=(1,)
t.__iter__()


d={'a':1}
d.__iter__()

set1={1,2,3}
set1.__iter__()


with open('a.txt',mode='w') as f:
    f.__iter__()
    f.__next__()
</code></pre>
<h3 id="创建一个迭代器"><a class="header" href="#创建一个迭代器">创建一个迭代器</a></h3>
<p>把一个类作为一个迭代器使用需要在类中实现两个方法 <code>iter()</code> 与 <code>next()</code> 。</p>
<ol>
<li>
<p><code>iter()</code> 方法返回一个特殊的迭代器对象,这个迭代器对象实现了 <code>next()</code> 方法并通过 <code>StopIteration</code> 异常标识迭代的完成。</p>
</li>
<li>
<p><code>next()</code> 方法会返回<strong>下一个迭代器对象</strong>。</p>
</li>
<li>
<p><strong>StopIteration</strong></p>
<p><code>StopIteration</code> 异常用于标识<strong>迭代的完成</strong>，防止出现无限循环的情况，在 <strong>next</strong>() 方法中我们可以设置在完成指定循环次数后触发 <code>StopIteration</code> 异常来结束迭代。</p>
</li>
</ol>
<blockquote>
<p>创建一个返回数字的迭代器，初始值为 1，逐步递增 1</p>
</blockquote>
<pre><code class="language-python">class MyNumbers:
  def __iter__(self):
    # 初始化迭代器
    self.a = 1
    return self
 
  def __next__(self):
    # 迭代器返回值
    if self.a &lt;= 20:
      x = self.a
      self.a += 1
      return x
    else:
      raise StopIteration
 
myclass = MyNumbers()
myiter = iter(myclass)
 
for x in myiter:
  print(x)

# fun2:
myiter = iter(myclass)
print(next(myiter))
print(next(myiter))
print(next(myiter))
print(next(myiter))
print(next(myiter))
</code></pre>
<h3 id="for-循环的工作原理"><a class="header" href="#for-循环的工作原理">For 循环的工作原理</a></h3>
<p>for 循环可以称之为叫<strong>迭代器循环</strong></p>
<pre><code class="language-json">d = {'a':1,'b':2,'c':3}
</code></pre>
<ol>
<li><code>d.iter()</code> 得到一个迭代器对象</li>
<li><code>迭代器对象.next()</code> 拿到一个返回值，然后将该返回值赋值给 k</li>
<li>循环往复,直到抛出 <code>StopIteration</code> 异常<strong>for 循环会捕捉异常然后结束循环.</strong></li>
</ol>
<pre><code class="language-python">d = {'a':1,'b':2,'c':3}
for k in d:   # d_it = d.__iter__()
    print(k)  # 循环k = d_it.__next__()直到抛出异常结束循环

with open('a.txt',mode='rt',encoding='utf-8') as f:
    for line in f: # f.__iter__()
        print(line)

list('hello') # 原理同for循环
</code></pre>
<h2 id="生成器"><a class="header" href="#生成器">生成器</a></h2>
<p>在 Python 中，使用了 <code>yield</code> 的函数被称为<strong>生成器</strong>（generator）。</p>
<p>跟普通函数不同的是，生成器是<strong>一个返回迭代器的函数</strong>，只能用于<strong>迭代操作</strong>，更简单点理解<strong>生成器就是一个迭代器</strong>。</p>
<p>在<strong>调用生成器</strong>运行的过程中，每次遇到 <code>yield</code> 时函数会<strong>暂停并保存当前所有的运行信息</strong>，<strong>返回 ​</strong>​**<code>yield</code><strong>​</strong>​ 的值**, 并在下一次执行 <code>next()</code> 方法时<strong>从当前位置继续运行</strong>。</p>
<p><strong>调用一个生成器函数，返回的是一个迭代器对象。</strong></p>
<h3 id="生成器的使用"><a class="header" href="#生成器的使用">生成器的使用</a></h3>
<pre><code class="language-python">def func():
    print('第一次')
    yield 1
    print('第二次')
    yield 2
    print('第三次')
    yield 3
    print('第四次')

g = func()
print(g)
# 生成器就是迭代器
# 生成器函数返回的是可迭代对象.
g.__iter__()

# g.__next__()会触发函数体代码的运行，然后遇到yield停下来，将yield后的值
# 当做本次调用的结果返回
g = func()
# 可以用iter将可迭代对象转化为迭代器.用next()方法
print(g)

g.__iter__()

res1 = g.__next__()
# 第一次
print(res1)
# 1

res2 = g.__next__()
# 第二次
print(res2)
# 2

res3 = g.__next__()
# 第三次
print(res3)
# 3

res4 = g.__next__()
# 第四次
# StopIteration
</code></pre>
<p>实例: 使用 <code>yield</code> 实现斐波那契数列：</p>
<pre><code class="language-python">def fibonacci(n):  # 生成器函数 - 斐波那契
    a, b, counter = 0, 1, 0
    while True:
        if (counter &gt; n):
            return
        yield a
        a, b = b, a + b
        counter += 1


f = fibonacci(10)  # f 是一个迭代器，由生成器返回生成

while True:
    try:
        print(next(f), end=&quot; &quot;)
    except StopIteration:
        break
</code></pre>
<h3 id="yield-关键字"><a class="header" href="#yield-关键字"><code>yield</code> 关键字</a></h3>
<p>yield 关键字的作用是<strong>函数与调用者</strong>的通信，它不光能够将<strong>值返回给调用者</strong>，它还可以<strong>接收调用者传过来的值</strong>，那么怎么实现呢？ 调用者通过 <code>send()</code> 函数将值传递给<strong>generator</strong>，<strong>generator</strong>通过 <code>yield</code> 前面的变量 (形如:<code>n = yield)</code> 来接收</p>
<pre><code class="language-python">&gt;&gt;&gt; def test():
 number = 0
 while True:
  n = yield number
  print('我是yield关键字下面一行代码')
  print('调用者传递过来的值为:', n)
 
  
&gt;&gt;&gt; t = test()
&gt;&gt;&gt; t.send(None)  
# 当第一次执行生成器的时候，需要传入None

&gt;&gt;&gt; t.send(1)
我是yield关键字下面一行代码
调用者传递过来的值为: 1

&gt;&gt;&gt; t.send(2)
我是yield关键字下面一行代码
调用者传递过来的值为: 2
t.close() 关闭generator后再调用，会出现StopIteration异常
&gt;&gt;&gt; next(t)
我是yield关键字下面一行代码
调用者传递过来的值为: None
</code></pre>
<blockquote>
<p>可以发现，<code>send</code> 函数和 <code>next</code> 函数的区别就是 <code>send</code> 函数可以在执行 generator 的<strong>过程中</strong>，给<strong>generator</strong>发送消息。<strong>而 next 仅仅是接收 yield 右边的变量值</strong>。</p>
</blockquote>
<h3 id="send方法用法"><a class="header" href="#send方法用法"><code>send()</code>​<strong>方法用法</strong></a></h3>
<ol>
<li>
<p><strong>send 过来的数值 = yield next 出来的数值</strong></p>
</li>
<li>
<p>它的主要作用是，当我需要<strong>手动更改生成器里面的某一个值并且使用它</strong>，则<strong>send 发送进去一个数据</strong>，然后<strong>保存到 yield 语句的返回值</strong>，以提供使用.</p>
</li>
<li>
<p><code>send()</code> 的返回值就是那个<strong>本来应该被迭代出来的那个值</strong>。这样既可以<strong>保证我能够传入新的值，原来的值也不会弄丢.</strong></p>
</li>
<li>
<p>实例:</p>
<pre><code class="language-python">def my_generator(n):
    '''定义一个生成器'''
    for i in range(n):
        # send来的数值 = yield 数值
        num = yield i
        print(f'传入的{num}')

g = my_generator(5)
print(next(g))
print(next(g))
a = g.send(100)
print('我是{0}'.format(a))
print(next(g))
print(next(g))
''' 结果
0
传入的None
1
传入的100 
我是2     
传入的None
3
传入的None
4
'''
</code></pre>
</li>
</ol>
<h3 id="throw-方法用法"><a class="header" href="#throw-方法用法"><code>throw()</code> 方法用法</a></h3>
<blockquote>
<p>简单来说就是:<strong>向生成器扔去一个异常,使生成器停止.</strong></p>
</blockquote>
<p><code>raise exception in generator，return next yielded value or StopIteration</code>，即在<strong>生成器中抛出异常</strong>，并且这个 throw 函数会<strong>返回下一个要迭代的值</strong>或者是<strong>StopIteration</strong>。还是通过几个例子来看吧！</p>
<pre><code class="language-python">def my_generator():
    yield 'a'
    yield 'b'
    yield 'c'
g = my_generator()
print(next(g))
print(next(g))
print('-------------------------')
print(g.throw(StopIteration))
print(next(g))
'''运行结果为：
a
b
-------------------------
StopIteration
'''
</code></pre>
<h3 id="生成器的启动与关闭-close"><a class="header" href="#生成器的启动与关闭-close"><strong>生成器的启动与关闭 close</strong></a></h3>
<ol>
<li>
<p><strong>生成器的启动</strong></p>
<p><strong>方法 1：<strong>​<strong><strong>直接使用</strong></strong>​</strong></strong><code>next(g)</code><strong><strong>​</strong></strong>，这会****​<strong>直接开始迭代第一个元素</strong>（<strong>推荐使用这个启动</strong>）</p>
<p><strong>方法 2：<strong>​<strong><strong>使用</strong></strong>​</strong></strong><code>g.send(None)</code>**<strong>​<strong><strong>进行启动，注意</strong></strong>​<strong>第一次启动的时候只能传入</strong>​</strong><code>None</code><strong>，如果传入其他具体的指则会</strong>报错**哦！</p>
<pre><code class="language-python">def my_generator():
    yield 1
    yield 2
    yield 3
    yield 4

g = my_generator()
g.send(None)   #第一次启动，本来第一次应该迭代的1，这里被取代了，但是send(None)会返回1
print(next(g))
print(next(g))
print(next(g))

'''运行结果为：
2
3
4
'''
</code></pre>
</li>
<li>
<p><strong>生成器的关闭</strong></p>
<p>如果一个生成器被<strong>中途关闭</strong>之后，在此调用 <code>next()</code> 方法，则会显示错误，如下：</p>
<pre><code class="language-python">def my_generator():
    yield 1
    yield 2
    yield 3
    yield 4

g = my_generator()
print(next(g))
print(next(g))
g.close()
print(next(g))   #在此处会显示错误
print(next(g))
'''运行结果为：
1
2
显示StopIteration
'''
</code></pre>
</li>
</ol>
<h3 id="生成器的终止迭代stopiteration"><a class="header" href="#生成器的终止迭代stopiteration"><strong>生成器的终止迭代——<strong>​</strong><code>StopIteration</code></strong></a></h3>
<blockquote>
<p>前面讲的手动关闭生成器，使用 <code>close()</code> 方法，后面的迭代会抛出 <code>StopIteration</code> 异常。</p>
</blockquote>
<p>在一个生成器中，如果没有 <code>return</code>，则默认执行到函数完毕时返回 <code>StopIteration</code>:</p>
<pre><code class="language-python">def g1():
    yield 1
g = g1()
next(g)    #第一次调用next(g)时，会在执行完yield语句后挂起，所以此时程序并没有执行结束。
next(g)    #程序试图从yield语句的下一条语句开始执行，发现已经到了结尾，所以抛出StopIteration异常。
'''运行结果为：
1
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
StopIteration
'''
</code></pre>
<p>如果遇到 <code>return</code>,如果在执行过程中 return，则直接抛出 <code>StopIteration</code> 终止迭代:</p>
<pre><code class="language-python">def g2():
    yield 'a'
    return
    yield 'b'
g=g2()
next(g)    #程序停留在执行完yield 'a'语句后的位置。
next(g)    #程序发现下一条语句是return，所以抛出StopIteration异常，这样yield 'b'语句永远也不会执行。
'''运行结果为：
a
b
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
StopIteration
'''
</code></pre>
<p>如果在 <code>return</code> 后返回一个值，那么这个值为 <code>StopIteration</code> 异常的说明，不是程序的返回值。</p>
<pre><code class="language-python">def g3():
 yield 'a'
 return '这是错误说明'
 yield 'b'   #有一些编辑器会提示错误，此处为unreachable code，即不可到达的代码
g=g3()
next(g)
next(g)
'''运行结果为：
a
Traceback (most recent call last):
 File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
StopIteration: 这是错误说明
'''
</code></pre>
<blockquote>
<p><strong>注意：<strong>​<strong><strong>生成器没有办法使用</strong></strong>​</strong></strong><code>return</code><strong><strong>​<strong><strong>来返回值。因为</strong></strong>​</strong></strong><code>return</code>****​<strong><strong>返回的那个值是通过</strong></strong>​<strong>StopIteration 的异常信息</strong>返回的，所以没办法<strong>直接获取这个 return 返回的值</strong>。</p>
</blockquote>
<p>当然上面所说的无法获取<strong>return 返回值</strong>，我们指的是没有办法通过 <code>result=g3()</code> 这种形式获取<strong>return 的返回值</strong>。实际上还是有手段获取这个<strong>return 的值的</strong>，有两种方法：</p>
<ol>
<li>
<p>使用 <code>yield from</code> 语句</p>
</li>
<li>
<p>因为 <code>return</code> 返回的值是作为<strong>StopIteration 的一个 value 属性存在的</strong>，StopIteration 本质上是<strong>一个类</strong>，所以可以通过访问它的<strong>value 属性获取这个 return 返回的值</strong>。使用下面的代码：</p>
<pre><code class="language-python">def g3():
    yield 'a'
    return '这是错误说明'
    yield 'b'
g=g3()

try:   
    print(next(g))  #a
    print(next(g))  #触发异常
except StopIteration as exc:
    result=exc.value
    print(result)
'''运行结果为：
a
这是错误说明
'''
</code></pre>
</li>
</ol>
<h3 id="yield实现协程"><a class="header" href="#yield实现协程"><strong><code>yield</code><strong>​</strong>实现协程</strong></a></h3>
<p>在 Python 中，协程通过 <code>yield</code> 实现。因为当<strong>一个函数中有 yield 存在</strong>的时候，这个函数是<strong>生成器</strong>，那么当你调用这个函数的时候，你在函数体中写的代码<strong>并没有被执行</strong>，而是<strong>只返回了一个生成器对象</strong>，这个需要特别注意。然后，你的代码将会在每次使用这个生成器的时候被执行。</p>
<p>前面讲过<strong>yield 表达式</strong>的两个关键作用：<strong>①返回一个值、②接收调用者的参数</strong></p>
<p>**“调用者”与“被调用者”**之间的通信是通过 <code>send()</code> 进行联系的</p>
<p>正是因为 <code>yield</code> 实现的生成器具备**“中断等待的功能”<strong>，才使得 yield 可以实现</strong>协程**。</p>
<ol>
<li>
<p>例子 1:<strong>生产者 - 消费者模型</strong></p>
<pre><code class="language-python">def consumer():
    r = ''
    while True:
        n = yield r  #执行的中断点
        if not n:
            return
        print('[消费者] 正在消费:{0}'.format(n))
        r = '200 人民币'

def produce(c):
    c.send(None)  #启动消费者（生成器）——实际上是函数调用，只不过生成器不是直接象函数那般调用的
    n = 0
    while n &lt; 5:
        n = n + 1
        print('[生产者] 正在生产:{0}'.format(n))
        r = c.send(n) #给消费者传入值——实际上也是函数调用
        print('[生产者] 消费者返回:{0}'.format(r))
        print('-------------------------------------------------')
    c.close()

c = consumer()#构造一个生成器
produce(c)

'''运行结果为：
[生产者] 正在生产:1
[消费者] 正在消费:1
[生产者] 消费者返回:200 人民币
-------------------------------------------------
[生产者] 正在生产:2
[消费者] 正在消费:2
[生产者] 消费者返回:200 人民币
-------------------------------------------------
[生产者] 正在生产:3
[消费者] 正在消费:3
[生产者] 消费者返回:200 人民币
-------------------------------------------------
[生产者] 正在生产:4
[消费者] 正在消费:4
[生产者] 消费者返回:200 人民币
-------------------------------------------------
[生产者] 正在生产:5
[消费者] 正在消费:5
[生产者] 消费者返回:200 人民币
-------------------------------------------------
'''
</code></pre>
</li>
</ol>
<p>协程其实就是一个<strong>可以暂停执行</strong>的函数，并且<strong>可以恢复继续执行</strong>。那么 <code>yield</code> 已经可以<strong>暂停执行</strong>了，如果在暂停后有办法把一些 <code>value</code> 发回到<strong>暂停执行的函数</strong>中，那么 Python 就有了**『协程』**。于是有了, <strong>“把东西发送到已经暂停的生成器中”</strong> 的方法，这个方法就是 <code>send()</code>。</p>
<h3 id="yield-from-的简单实现"><a class="header" href="#yield-from-的简单实现"><code>yield from</code> 的简单实现</a></h3>
<p>yield 是每次**“惰性返回”一个值**，其实从名字中就能看出，<code>yield from</code> 是 <code>yield</code> 的升级改进版本，如果将<strong>yield 理解成“返回”</strong>，那么 yield from 就是**“从什么（生成器）里面返回”**，这就构成了 <code>yield from</code> 的一般语法，即:</p>
<pre><code class="language-python">yield from 生成器()
</code></pre>
<p><strong>其实她等同于:</strong></p>
<pre><code class="language-python">for item in 生成器():
    yield item
</code></pre>
<p>这样的形式。我们通过一个简单例子来看：</p>
<pre><code class="language-python">def generator2():
    yield 'a'
    yield 'b'
    yield 'c'
    yield from generator1() #yield from iterable本质上等于 for item in iterable: yield item的缩写版
    yield from [11,22,33,44]
    yield from (12,23,34)
    yield from range(3)
    
for i in generator2():
    print(i,end=' , ')
'''运行的结果为：
a , b , c , 0 , 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 11 , 22 , 33 , 44 , 12 , 23 , 34 , 0 , 1 , 2 ,
'''
</code></pre>
<p><code>yield from</code> 后面可以跟的可以是 <strong>“ 生成器 、元组、 列表、range() 函数产生的序列等可迭代对象”</strong></p>
<p>简单地说,<code>yield from  generator</code> 。实际上就是返回<strong>另外一个生成器</strong>。而 <code>yield</code> 只是返回<strong>一个元素</strong>。从这个层面来说，有下面的等价关系：<strong>yield from iterable 本质上等于 for item in iterable: yield item 。</strong></p>
<h3 id="yield-from-的高级应用"><a class="header" href="#yield-from-的高级应用"><code>yield from</code> 的高级应用</a></h3>
<h4 id="1-针对-yield-无法获取生成器-return-的返回值"><a class="header" href="#1-针对-yield-无法获取生成器-return-的返回值"><strong>1. 针对 Yield 无法获取生成器 return 的返回值</strong></a></h4>
<blockquote>
<p>在使用<strong>yield 生成器</strong>的时候，如果使用<strong>for 语句去迭代生成器</strong>，则不会显式的发出<strong>StopIteration 异常</strong>，而是<strong>自动捕获 StopIteration 异常</strong>，所以如果<strong>遇到 return，只是会终止迭代，而不会触发异常</strong>，故而也就<strong>没办法获取 return 的值</strong>。如下：</p>
</blockquote>
<pre><code class="language-python">def my_generator():
    for i in range(5):
        if i==2:
            return '我被迫中断了'
        else:
            yield i
 
def main(generator):
    try:
        for i in generator:  #不会显式触发异常，故而无法获取到return的值
            print(i)
    except StopIteration as exc:
        print(exc.value)
 
g = my_generator()  #调用
main(g)
'''运行结果为：
0
1
'''
</code></pre>
<p><strong>for 迭代语句不会显式触发异常</strong>，故而无法获取到<strong>return 的值</strong>，迭代到 2 的时候<strong>遇到 return 语句</strong>，<strong>隐式的触发了 StopIteration 异常</strong>，就<strong>终止迭代</strong>了，但是在程序中<strong>不会显示出来</strong>。</p>
<p>如果是使用 <code>next()</code>​<strong>一次一次迭代</strong>，则会<strong>显式触发异常</strong>，但要获取 return 的返回值，我需要如下操作：</p>
<pre><code class="language-python">def my_generator():
    for i in range(5):
        if i==2:
            return '我被迫中断了'
        else:
            yield i
 
def main(generator):
    try:
        print(next(generator))   #每次迭代一个值，则会显式出发StopIteration
        print(next(generator))
        print(next(generator))
        print(next(generator))
        print(next(generator))
    except StopIteration as exc:
        print(exc.value)     #获取返回的值

g=my_generator()
main(g)
'''运行结果为：
0
1
我被迫中断了
'''
</code></pre>
<p>现在我们使用 <code>yield from</code> 来完成上面的同样的功能：</p>
<pre><code class="language-python">生成器中return的值 = yield from 生成器对象
</code></pre>
<pre><code class="language-python">def my_generator():
    for i in range(5):
        if i == 2:
            # 遇到return自动触发StopIteration异常
            return '我被迫中断了'
        else:
            yield i
 
def wrap_my_generator(generator):  # 定义一个包装“生成器”的生成器，它的本质还是生成器
    result = yield from generator    # 自动触发StopIteration异常，并且将return的返回值赋值给yield from表达式的结果，即result
    print(result)
 
def main(generator):
    for j in generator:
        print(j)
 
g = my_generator()
wrap_g = wrap_my_generator(g)
main(wrap_g)  #调用
'''运行结果为：
0
1
我被迫中断了
'''
</code></pre>
<p>从上面的比较可以看出，<code>yield from</code> 具有以下几个<strong>特点</strong>：</p>
<ol>
<li><strong>单独</strong>​**<code>yield</code><strong>​</strong>时**：的 my_generator 是原始的生成器，main 是调用方，使用 yield 的时候，只涉及到这两个函数，即“调用方”与“生成器（协程函数）”是<strong>直接进行交互的，不涉及其他方法</strong>，即**“调用方——&gt;生成器函数 (协程函数)”；**</li>
<li><strong>在使用</strong>​**<code>yield from</code><strong>​</strong>的时**：多了一个对原始 my_generator 的<strong>包装函数</strong>，然后<strong>调用方是通过这个包装函数</strong>（后面会讲到它专有的名词）来与<strong>生成器进行交互</strong>的，即**“调用方——&gt;生成器包装函数——&gt;生成器函数 (协程函数)”**；</li>
<li><code>yield from iteration</code> 结构会在内部<strong>自动捕获 iteration 生成器的 StopIteration 异常</strong>。这种处理方式与 for 循环处理 StopIteration 异常的方式一样。而且对 <code>yield from</code> 结构来说，<strong>解释器不仅会捕获 StopIteration 异常，还会把 return 返回的值或者是 StopIteration 的 value 属性的值变成 yield from 表达式的值，即上面的 result。</strong></li>
</ol>
<blockquote>
<p>委派生成器：包含 <code>yield from</code> <iterable> <strong>表达式的生成器函数</strong>；即上面的 wrap_my_generator<strong>生成器包装函数</strong></p>
</blockquote>
<blockquote>
<p>子生成器：从 <code>yield from</code> 表达式中 <iterable> 部分获取的生成器；即上面的 my_generator<strong>生成器函数</strong></p>
</blockquote>
<blockquote>
<p>调用方：<strong>调用委派生成器的客户端代码</strong>；即上面的<strong>main 调用方函数</strong></p>
</blockquote>
<p><img src="http://oss.whaleluo.top/blog/old/20210814184753.png-picsmall" alt="" /></p>
<h4 id="2-yield-from-的管道传输用法示例"><a class="header" href="#2-yield-from-的管道传输用法示例">2. Yield from 的管道传输用法示例</a></h4>
<p>其实 <code>yield from</code> 最重要的作用就是提供了一个**“数据传输的管道”**，下面通过一个简单的例子加以说明为什么是管道：</p>
<pre><code class="language-python">def average():
    total = 0.0  #数字的总和
    count = 0    #数字的个数
    avg = None   #平均值
    while True:
        num = yield avg
        total += num
        count += 1
        avg = total/count
 
def wrap_average(generator):
    yield from generator
 
#定义一个函数，通过这个函数向average函数发送数值
def main(wrap):
    print(next(wrap))  #启动生成器
    print(wrap.send(10))  # 10
    print(wrap.send(20))  # 15
    print(wrap.send(30))  # 20
    print(wrap.send(40))  # 25
  
g = average()
wrap = wrap_average(g)
main(wrap)
 
'''运行结果为：
None
10.0
15.0
20.0
25.0
'''
</code></pre>
<p>从上面我们可以发现，调用方发送的数据是发给 <code>wrap_average</code> 的，怎么依然到了生成器函数 <code>average</code> 里面呢？这就是**“数据传输管道的作用”<strong>。即</strong>主函数调用方 main 把各个 value 传给 grouper** ，而这个传入的值<strong>最终到达 averager 函数中</strong>； <strong>grouper 并不知道传入的是什么值</strong>，因为从上面的代码看出，<strong><code>wrap_average</code><strong>​</strong>里面完全没有处理这个值的任何代码！</strong></p>
<h2 id="装饰器"><a class="header" href="#装饰器">装饰器</a></h2>
<h3 id="函数引用"><a class="header" href="#函数引用">函数引用</a></h3>
<pre><code class="language-python">def test():
    print(&quot;1&quot;)
print(test)
# &lt;function __main__.test&gt;
a = test # 变量A指向函数对象
a() # 变量A可调用函数
</code></pre>
<h3 id="什么是闭包"><a class="header" href="#什么是闭包">什么是闭包</a></h3>
<blockquote>
<p><strong>在函数内部再定义一个函数，并且这个函数用到了外边函数的变量，那么将这些函数以及用到的一些变量称之为闭包。</strong></p>
</blockquote>
<h3 id="闭包的应用"><a class="header" href="#闭包的应用">闭包的应用</a></h3>
<pre><code class="language-python">def parse(number: int):
    print(&quot;第一层函数&quot;, number)

    def sum(number2):
        print(&quot;第二层函数加和后&quot;, number+number2)
    return sum
# 接受函数对象的引用
func = parse(100)
func(100)
</code></pre>
<p><img src="http://oss.whaleluo.top/blog/old/20210719211704.png-picsmall" alt="" /></p>
<p><img src="http://oss.whaleluo.top/blog/old/20210719215011.png-picsmall" alt="" /></p>
<p><img src="http://oss.whaleluo.top/blog/old/20210719215459.png-picsmall" alt="" /></p>
<p><img src="http://oss.whaleluo.top/blog/old/20210719215842.png-picsmall" alt="" /></p>
<p><img src="http://oss.whaleluo.top/blog/old/20210719220126.png-picsmall" alt="" /></p>
<pre><code class="language-python"># 编写闭包函数
def checkLogin(func):
    print(&quot;准备检查权限&quot;)

    def inner():
        print(&quot;权限正确!&quot;)
        func()  # 执行函数的变量

    return inner  # 返回一个函数对象

# main变量指向的是mian函数
def main():
    print(&quot;执行业务1&quot;)

# 不用修改主函数的内容,就可以扩展主函数.
main = checkLogin(main)  # 此时main变量指向的是inner函数
main()
# 等效于
# 到这里python会运行 checkLogin函数,并把下面的函数名变量指向 checkLogin 函数的返回值,即 inner 函数
@checkLogin
def mian():
    print(&quot;执行业务2&quot;)

# 在调用main之前已经被装饰了
mian()
</code></pre>
<h3 id="多个修饰器从下到上修饰"><a class="header" href="#多个修饰器从下到上修饰">多个修饰器，从下到上修饰</a></h3>
<p><img src="http://oss.whaleluo.top/blog/old/20210720161511.png-picsmall" alt="" /></p>
<blockquote>
<p><strong>装饰是倒着装的，执行是顺着执行的。</strong></p>
</blockquote>
<h3 id="装饰有参数的函数"><a class="header" href="#装饰有参数的函数">装饰有参数的函数</a></h3>
<p><img src="http://oss.whaleluo.top/blog/old/20210720162540.png-picsmall" alt="" /></p>
<blockquote>
<p>对不定长参数的传递</p>
</blockquote>
<p><img src="http://oss.whaleluo.top/blog/old/20210720162754.png-picsmall" alt="" /></p>
<h3 id="装饰有返回值的参数"><a class="header" href="#装饰有返回值的参数">装饰有返回值的参数</a></h3>
<p><img src="http://oss.whaleluo.top/blog/old/20210720163328.png-picsmall" alt="image-20210720163327239" /></p>
<h3 id="通用修饰器"><a class="header" href="#通用修饰器">通用修饰器</a></h3>
<p><img src="http://oss.whaleluo.top/blog/old/20210720164146.png-picsmall" alt="" /></p>
<h3 id="带参数的修饰器"><a class="header" href="#带参数的修饰器">带参数的修饰器</a></h3>
<p><img src="http://oss.whaleluo.top/blog/old/20210818144548.png-picsmall" alt="" /></p>
<blockquote>
<p>在函数中嵌套闭包函数</p>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../博客文章/_posts/Python/Python-Tkinter-GUI.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../../博客文章/_posts/Python/Flask-Web-note.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../博客文章/_posts/Python/Python-Tkinter-GUI.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../../博客文章/_posts/Python/Flask-Web-note.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../../elasticlunr.min.js"></script>
        <script src="../../../mark.min.js"></script>
        <script src="../../../searcher.js"></script>

        <script src="../../../clipboard.min.js"></script>
        <script src="../../../highlight.js"></script>
        <script src="../../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
