<!DOCTYPE HTML>
<html lang="cn" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Golang-error-note - WhaleFall Obsidian Notes</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="Keep Notes everyday">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../../favicon.svg">
        <link rel="shortcut icon" href="../../../favicon.png">
        <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
        <link rel="stylesheet" href="../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../../index.html"><strong aria-hidden="true">1.</strong> 落落的Notes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../SUMMARY.html"><strong aria-hidden="true">1.1.</strong> SUMMARY</a></li><li class="chapter-item expanded "><a href="../../../CutBoard/index.html"><strong aria-hidden="true">1.2.</strong> CutBoard</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../CutBoard/无线电爬取脚本.html"><strong aria-hidden="true">1.2.1.</strong> 无线电爬取脚本</a></li></ol></li><li class="chapter-item expanded "><a href="../../../博客文章/index.html"><strong aria-hidden="true">1.3.</strong> 博客文章</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../博客文章/博客文章测试.html"><strong aria-hidden="true">1.3.1.</strong> 博客文章测试</a></li><li class="chapter-item expanded "><a href="../../../博客文章/博客文章_post.html"><strong aria-hidden="true">1.3.2.</strong> 博客文章_post</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/index.html"><strong aria-hidden="true">1.3.3.</strong> _posts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../博客文章/_posts/openwebrx-sdr.html"><strong aria-hidden="true">1.3.3.1.</strong> openwebrx-sdr</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Rpi-3.html"><strong aria-hidden="true">1.3.3.2.</strong> Rpi-3</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Samba4-config.html"><strong aria-hidden="true">1.3.3.3.</strong> Samba4-config</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Linux-note.html"><strong aria-hidden="true">1.3.3.4.</strong> Linux-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Kali-Linux-Help.html"><strong aria-hidden="true">1.3.3.5.</strong> Kali-Linux-Help</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Rpi-1.html"><strong aria-hidden="true">1.3.3.6.</strong> Rpi-1</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Hexo-blog-format.html"><strong aria-hidden="true">1.3.3.7.</strong> Hexo-blog-format</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Freedom-network.html"><strong aria-hidden="true">1.3.3.8.</strong> Freedom-network</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Vim-config.html"><strong aria-hidden="true">1.3.3.9.</strong> Vim-config</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/clash-proxy-guide.html"><strong aria-hidden="true">1.3.3.10.</strong> clash-proxy-guide</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Github-workflow.html"><strong aria-hidden="true">1.3.3.11.</strong> Github-workflow</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Linux-iptables.html"><strong aria-hidden="true">1.3.3.12.</strong> Linux-iptables</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/onedrive-guide.html"><strong aria-hidden="true">1.3.3.13.</strong> onedrive-guide</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/openwrt-lede-build-notes.html"><strong aria-hidden="true">1.3.3.14.</strong> openwrt-lede-build-notes</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Depression-medicine.html"><strong aria-hidden="true">1.3.3.15.</strong> Depression-medicine</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Wky-help.html"><strong aria-hidden="true">1.3.3.16.</strong> Wky-help</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/radio-SWshort.html"><strong aria-hidden="true">1.3.3.17.</strong> radio-SWshort</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Server-all.html"><strong aria-hidden="true">1.3.3.18.</strong> Server-all</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Rpi-2.html"><strong aria-hidden="true">1.3.3.19.</strong> Rpi-2</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Study/index.html"><strong aria-hidden="true">1.3.3.20.</strong> Study</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Study/Ancient-poems.html"><strong aria-hidden="true">1.3.3.20.1.</strong> Ancient-poems</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Study/Zhongkao-maths.html"><strong aria-hidden="true">1.3.3.20.2.</strong> Zhongkao-maths</a></li></ol></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Python/index.html"><strong aria-hidden="true">1.3.3.21.</strong> Python</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Python/Python-Generator-Iterator-decorater.html"><strong aria-hidden="true">1.3.3.21.1.</strong> Python-Generator-Iterator-decorater</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Python/Python-async.html"><strong aria-hidden="true">1.3.3.21.2.</strong> Python-async</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Python/Flask-Web-note.html"><strong aria-hidden="true">1.3.3.21.3.</strong> Flask-Web-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Python/Python-Concurrent.html"><strong aria-hidden="true">1.3.3.21.4.</strong> Python-Concurrent</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Python/Python-Tkinter-GUI.html"><strong aria-hidden="true">1.3.3.21.5.</strong> Python-Tkinter-GUI</a></li></ol></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/index.html"><strong aria-hidden="true">1.3.3.22.</strong> Golang</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-const-note.html"><strong aria-hidden="true">1.3.3.22.1.</strong> Golang-const-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-goruntine-note.html"><strong aria-hidden="true">1.3.3.22.2.</strong> Golang-goruntine-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-package-note.html"><strong aria-hidden="true">1.3.3.22.3.</strong> Golang-package-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-interface-note.html"><strong aria-hidden="true">1.3.3.22.4.</strong> Golang-interface-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-project-and-gomod-note.html"><strong aria-hidden="true">1.3.3.22.5.</strong> Golang-project-and-gomod-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-error-note.html" class="active"><strong aria-hidden="true">1.3.3.22.6.</strong> Golang-error-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-method-note.html"><strong aria-hidden="true">1.3.3.22.7.</strong> Golang-method-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-envbuild-note.html"><strong aria-hidden="true">1.3.3.22.8.</strong> Golang-envbuild-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-datatype-note.html"><strong aria-hidden="true">1.3.3.22.9.</strong> Golang-datatype-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-function-note.html"><strong aria-hidden="true">1.3.3.22.10.</strong> Golang-function-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-type-keyword-note.html"><strong aria-hidden="true">1.3.3.22.11.</strong> Golang-type-keyword-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-HTML-note.html"><strong aria-hidden="true">1.3.3.22.12.</strong> Golang-HTML-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-variable-note.html"><strong aria-hidden="true">1.3.3.22.13.</strong> Golang-variable-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-pointer-note.html"><strong aria-hidden="true">1.3.3.22.14.</strong> Golang-pointer-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-JSON-note.html"><strong aria-hidden="true">1.3.3.22.15.</strong> Golang-JSON-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-id-note.html"><strong aria-hidden="true">1.3.3.22.16.</strong> Golang-id-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-struct-note.html"><strong aria-hidden="true">1.3.3.22.17.</strong> Golang-struct-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-map-note.html"><strong aria-hidden="true">1.3.3.22.18.</strong> Golang-map-note</a></li><li class="chapter-item expanded "><a href="../../../博客文章/_posts/Golang/Golang-note-catalogue.html"><strong aria-hidden="true">1.3.3.22.19.</strong> Golang-note-catalogue</a></li></ol></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../English-Study/index.html"><strong aria-hidden="true">1.4.</strong> English-Study</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../English-Study/英语音标学习.html"><strong aria-hidden="true">1.4.1.</strong> 英语音标学习</a></li></ol></li><li class="chapter-item expanded "><a href="../../../Study/index.html"><strong aria-hidden="true">1.5.</strong> Study</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../Study/Physical/index.html"><strong aria-hidden="true">1.5.1.</strong> Physical</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../Study/Physical/第5讲-力的正交分解.html"><strong aria-hidden="true">1.5.1.1.</strong> 第5讲-力的正交分解</a></li><li class="chapter-item expanded "><a href="../../../Study/Physical/第二讲-比例问题.html"><strong aria-hidden="true">1.5.1.2.</strong> 第二讲-比例问题</a></li><li class="chapter-item expanded "><a href="../../../Study/Physical/第六讲.html"><strong aria-hidden="true">1.5.1.3.</strong> 第六讲</a></li><li class="chapter-item expanded "><a href="../../../Study/Physical/第7讲.html"><strong aria-hidden="true">1.5.1.4.</strong> 第7讲</a></li><li class="chapter-item expanded "><a href="../../../Study/Physical/第一讲-运动的描述.html"><strong aria-hidden="true">1.5.1.5.</strong> 第一讲-运动的描述</a></li></ol></li><li class="chapter-item expanded "><a href="../../../Study/Chemistry/index.html"><strong aria-hidden="true">1.5.2.</strong> Chemistry</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../Study/Chemistry/第一讲-离子反应的基础概念.html"><strong aria-hidden="true">1.5.2.1.</strong> 第一讲-离子反应的基础概念</a></li></ol></li><li class="chapter-item expanded "><a href="../../../Study/Math/index.html"><strong aria-hidden="true">1.5.3.</strong> Math</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../Study/Math/函数.html"><strong aria-hidden="true">1.5.3.1.</strong> 函数</a></li><li class="chapter-item expanded "><a href="../../../Study/Math/第一讲-集合与常用逻辑用语.html"><strong aria-hidden="true">1.5.3.2.</strong> 第一讲-集合与常用逻辑用语</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../other/index.html"><strong aria-hidden="true">1.6.</strong> other</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../other/OPENAI-KEY.html"><strong aria-hidden="true">1.6.1.</strong> OPENAI-KEY</a></li><li class="chapter-item expanded "><a href="../../../other/未命名.html"><strong aria-hidden="true">1.6.2.</strong> 未命名</a></li><li class="chapter-item expanded "><a href="../../../other/写给v友的一段话.html"><strong aria-hidden="true">1.6.3.</strong> 写给v友的一段话</a></li><li class="chapter-item expanded "><a href="../../../other/模拟飞行.html"><strong aria-hidden="true">1.6.4.</strong> 模拟飞行</a></li></ol></li><li class="chapter-item expanded "><a href="../../../业余无线电Ham/index.html"><strong aria-hidden="true">1.7.</strong> 业余无线电Ham</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../业余无线电Ham/通联日志.html"><strong aria-hidden="true">1.7.1.</strong> 通联日志</a></li><li class="chapter-item expanded "><a href="../../../业余无线电Ham/Opengd77-Firmware-教程.html"><strong aria-hidden="true">1.7.2.</strong> Opengd77-Firmware-教程</a></li><li class="chapter-item expanded "><a href="../../../业余无线电Ham/广播.html"><strong aria-hidden="true">1.7.3.</strong> 广播</a></li><li class="chapter-item expanded "><a href="../../../业余无线电Ham/泉盛-K5-音质优化.html"><strong aria-hidden="true">1.7.4.</strong> 泉盛-K5-音质优化</a></li><li class="chapter-item expanded "><a href="../../../业余无线电Ham/业余无线电笔记.html"><strong aria-hidden="true">1.7.5.</strong> 业余无线电笔记</a></li><li class="chapter-item expanded "><a href="../../../业余无线电Ham/业余无线电采购.html"><strong aria-hidden="true">1.7.6.</strong> 业余无线电采购</a></li><li class="chapter-item expanded "><a href="../../../业余无线电Ham/附近航空频率.html"><strong aria-hidden="true">1.7.7.</strong> 附近航空频率</a></li><li class="chapter-item expanded "><a href="../../../业余无线电Ham/广播/index.html"><strong aria-hidden="true">1.7.8.</strong> 广播</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../业余无线电Ham/广播/广播收听报告-2023.05.23.html"><strong aria-hidden="true">1.7.8.1.</strong> 广播收听报告-2023.05.23</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../test/index.html"><strong aria-hidden="true">1.8.</strong> test</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../test/落落-OpenWRT-导航页.html"><strong aria-hidden="true">1.8.1.</strong> 落落-OpenWRT-导航页</a></li><li class="chapter-item expanded "><a href="../../../test/思源笔记自动同步测试.html"><strong aria-hidden="true">1.8.2.</strong> 思源笔记自动同步测试</a></li><li class="chapter-item expanded "><a href="../../../test/Obsidian-Hexo-模板测试.html"><strong aria-hidden="true">1.8.3.</strong> Obsidian-Hexo-模板测试</a></li></ol></li><li class="chapter-item expanded "><a href="../../../高中事件/index.html"><strong aria-hidden="true">1.9.</strong> 高中事件</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../高中事件/举报中小学教师违规方法论.html"><strong aria-hidden="true">1.9.1.</strong> 举报中小学教师违规方法论</a></li><li class="chapter-item expanded "><a href="../../../高中事件/举报法律依据.html"><strong aria-hidden="true">1.9.2.</strong> 举报法律依据</a></li><li class="chapter-item expanded "><a href="../../../高中事件/举报信.html"><strong aria-hidden="true">1.9.3.</strong> 举报信</a></li></ol></li><li class="chapter-item expanded "><a href="../../../碎碎念/index.html"><strong aria-hidden="true">1.10.</strong> 碎碎念</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../碎碎念/freedom.html"><strong aria-hidden="true">1.10.1.</strong> freedom</a></li><li class="chapter-item expanded "><a href="../../../碎碎念/猫猫.html"><strong aria-hidden="true">1.10.2.</strong> 猫猫</a></li><li class="chapter-item expanded "><a href="../../../碎碎念/文案.html"><strong aria-hidden="true">1.10.3.</strong> 文案</a></li><li class="chapter-item expanded "><a href="../../../碎碎念/奇思妙想.html"><strong aria-hidden="true">1.10.4.</strong> 奇思妙想</a></li><li class="chapter-item expanded "><a href="../../../碎碎念/闲鱼文案模板.html"><strong aria-hidden="true">1.10.5.</strong> 闲鱼文案模板</a></li><li class="chapter-item expanded "><a href="../../../碎碎念/记录.html"><strong aria-hidden="true">1.10.6.</strong> 记录</a></li><li class="chapter-item expanded "><a href="../../../碎碎念/思源笔记本使用感想.html"><strong aria-hidden="true">1.10.7.</strong> 思源笔记本使用感想</a></li><li class="chapter-item expanded "><a href="../../../碎碎念/知乎精选.html"><strong aria-hidden="true">1.10.8.</strong> 知乎精选</a></li><li class="chapter-item expanded "><a href="../../../碎碎念/猫猫/index.html"><strong aria-hidden="true">1.10.9.</strong> 猫猫</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../碎碎念/猫猫/多多.html"><strong aria-hidden="true">1.10.9.1.</strong> 多多</a></li></ol></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">WhaleFall Obsidian Notes</h1>

                    <div class="right-buttons">
                        <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <hr />
<p>title: Golang 学习笔记——Go error 错误
date: 2022-05-22 0:44:48
updated: 2022-05-22 0:44:48
categories: Golang
tags: [Golang, Coding]
description:
thumbnail: http://oss.whaleluo.top/blog/Golang/icon_img.png-picsmall
banner_img: http://oss.whaleluo.top/blog/Golang/icon_img.png-picsmall</p>
<hr />
<h1 id="go-error-错误"><a class="header" href="#go-error-错误">Go Error 错误</a></h1>
<p>Go 使用控制流机制（如 if 和 return）处理异常，这使得编码人员能更多的关注错误处理。</p>
<p>在实际工程项目中，我们希望通过程序的错误信息快速定位问题，但是又不喜欢错误处理代码写的冗余而又啰嗦。Go 语言没有提供像 <code>Java</code>、<code>c#</code> 语言中的 <code>try..catch</code> 异常处理方式，而是通过 <strong>函数返回值</strong> 逐层往上抛。这种设计，鼓励工程师在代码中 <strong>显式的检查错误</strong> ，而非忽略错误，好处就是避免漏掉本应处理的错误。但是带来一个弊端，让 <strong>代码啰嗦</strong> 。</p>
<h2 id="错误异常"><a class="header" href="#错误异常">错误&amp;异常</a></h2>
<ul>
<li><strong>错误</strong>: 指的是<strong>可能出现问题</strong>的地方出现了问题。比如打开一个文件时失败，这种情况在人们的意料之中。</li>
<li><strong>异常</strong>: 指的是不<strong>应该出现问题</strong>的地方出现了问题。比如引用了空指针，这种情况<strong>在人们的意料之外</strong>。可见，错误是业务过程的一部分，而异常不是。</li>
</ul>
<p>Go 中的错误 <strong>也是一种类型</strong> 。错误用内置的 <code>error</code> 类型表示。就像其他类型的，如 <code>int</code>,<code>floate64</code>.错误值可以<strong>存储在变量中，从函数中返回</strong>，等等。</p>
<h2 id="处理-os-模块异常"><a class="header" href="#处理-os-模块异常">处理 OS 模块异常</a></h2>
<p>如果一个函数或方法返回一个错误，那么按照惯例，它必须是 <strong>函数返回的最后一个值</strong>。因此，<code>Open</code> 函数返回的值是最后一个值。<br />
处理错误的惯用方法是将 <strong>返回的错误与 ​</strong>​**<code>nil</code><strong>​</strong>​ 进行比较** 。<code>nil</code> 值表示没有发生错误，而 <code>非nil</code> 值表示出现错误。在我们的例子中，我们检查错误是否为 <code>nil</code>。如果它不是 <code>nil</code> ,我们只需 <strong>打印错误并从主函数返回</strong>。</p>
<pre><code class="language-go">package main
import (
&quot;os&quot;
&quot;fmt&quot;
&quot;log&quot;
)

func main() {
    //打开一个文件
    f,err := os.Open(name:&quot;test.txt&quot;)
    if err != nil{
        //log.Fatal(err)  //调用日志模块捕捉异常,会自动 return
        fmt.Println(err) //异常信息:open test.txt:no such file directoryreturn
        return
    }

  fmt.Println(f.Name(),&quot;打开文件成功。。&quot;)

}
</code></pre>
<h2 id="错误类型表示"><a class="header" href="#错误类型表示">错误类型表示</a></h2>
<p>G0 语言通过 <strong>内置的错误接口</strong> 提供了非常简单的错误处理机制。<br />
<strong>定义错误类型</strong> 的构建。错误是一个带有以下定义的接口类型:</p>
<pre><code class="language-go">type error interface {
    Error() string
}
</code></pre>
<blockquote>
<p><code>fmt.Println(err)</code> 会在内部执行 Error() 方法,返回错误的字符串信息.</p>
</blockquote>
<p><img src="http://oss.whaleluo.top/blog/Golang/error-1.png-picsmall" alt="" /></p>
<h3 id="从错误中获取更多信息"><a class="header" href="#从错误中获取更多信息">从错误中获取更多信息</a></h3>
<blockquote>
<p><strong>断言判断接口底层类型</strong> ,通过 <code>struct</code> 结构体的属性和方法获取更多的信息</p>
</blockquote>
<h4 id="使用-struct-类型属性"><a class="header" href="#使用-struct-类型属性">使用 <code>struct</code> 类型属性</a></h4>
<p><img src="http://oss.whaleluo.top/blog/Golang/error-4.png-picsmall" alt="" /></p>
<h4 id="调用-struct-类型的方法"><a class="header" href="#调用-struct-类型的方法">调用 <code>struct</code> 类型的方法</a></h4>
<p><img src="http://oss.whaleluo.top/blog/Golang/error-5.png-picsmall" alt="" /></p>
<h4 id="直接比较"><a class="header" href="#直接比较">直接比较</a></h4>
<p>直接与错误类型的变量进行比较.</p>
<pre><code class="language-go">package main
import (
  &quot;path/filepath&quot;
  &quot;fmt&quot;
)
func main() {
  files,err := filepath.Glob(&quot;[&quot;)
  // 直接判断错误的类型
  if err != nil &amp; err == filepath.ErrBadPattern{
    fmt.Println(err)//syntax error in patternreturn
    return
  }
  fmt.Println(a:&quot;files:&quot;,files)
}
</code></pre>
<h2 id="自定义-error"><a class="header" href="#自定义-error">自定义 Error</a></h2>
<h3 id="1-通过-errorsnew描述"><a class="header" href="#1-通过-errorsnew描述">1. 通过 <code>errors.New(&quot;描述&quot;)</code></a></h3>
<p><img src="http://oss.whaleluo.top/blog/Golang/error-2.png-picsmall" alt="" /></p>
<h3 id="2-通过-fmterrorf"><a class="header" href="#2-通过-fmterrorf">2. 通过 <code>fmt.Errorf()</code></a></h3>
<p>也可以使用 <code>fmt.Errorf()</code> 输出的错误更详细,支持格式化输出错误.</p>
<p><img src="http://oss.whaleluo.top/blog/Golang/error-3.png-picsmall" alt="" /></p>
<h3 id="3-定义错误"><a class="header" href="#3-定义错误">3. 定义错误</a></h3>
<pre><code class="language-go">package main

import (
 &quot;fmt&quot;
 &quot;math&quot;
)

func main() {
 r := -2.0
 area, err := circleArea(r)
 if err != nil {
  // 打印 err 就是调用错误struct的Error()方法,返回字符串
        //错误值其实就是错误对象调用Error方法执行的结果
  // fmt.Println(err)
  // 通过接口断言判断错误类型,获取错误类型中的属性,运行错误类型中的方法
  if err, ok := err.(*areaError); ok {
   fmt.Println(err)
   fmt.Printf(&quot;半径是:%.2f\n&quot;, err.radius)
  } else {
   fmt.Println(err)
   fmt.Printf(&quot;其他错误类型:%s,%T\n&quot;, err, err)
  }
  return
 }
 fmt.Println(&quot;圆的的面积是:&quot;, area)
}

//1. 定义一个struct,表示错误类型
type areaError struct {
 msg    string // 错误的描述
 radius float64  //半径
}

//2. 实现error接口，就是实现Error方法，该方法返回字符串
// 需要传入结构体指针
func (e *areaError) Error() string {
 // 返回一个格式化的字符串
 return fmt.Sprintf(&quot;error: 半径,%.2f,%s&quot;, e.radius, e.msg)
}

// 3.定义一个求圆面积的函数,注意，第二个返回值是go内置的 error接口实现类型
func circleArea(r float64) (float64, error) {
 if r &lt; 0 {
  // 用 &amp; 返回error对象指针
  return 0, &amp;areaError{&quot;半径是非法的&quot;, r}
 }
 return math.Pi * r * r, nil
}
</code></pre>
<h2 id="尽量不要-_-忽略错误"><a class="header" href="#尽量不要-_-忽略错误">尽量不要 <code>_</code> 忽略错误</a></h2>
<p><strong>永远不要忽略一个错误。忽视错误会招致麻烦。</strong></p>
<pre><code class="language-go">files,_ := filepath.Glob(&quot;[&quot;)
</code></pre>
<h2 id="panic-和-recover"><a class="header" href="#panic-和-recover"><code>panic()</code> 和 <code>recover()</code></a></h2>
<pre><code class="language-go">package main

import &quot;fmt&quot;

func main() {
 // 处理 panic 的 defer 匿名函数
 defer func() {
  // reconver() 接受 panic() 的信息
  if msg := recover(); msg != nil {
   fmt.Println(msg, &quot;程序恢复啦。。&quot;)
  }
 }()
 // funB的panic传递到此处,引起panic时需要执行完所有defer主函数才会报错
 funB()

}

func myprint(s string) {
 fmt.Println(s)
}

func funB() { //外围函数
 // 匿名函数,处理pianic的recover()也可以放在main函数中
 // defer是逆序执行的
 defer func() {
  // reconver() 接受 panic() 的信息
  if msg := recover(); msg != nil {
   fmt.Println(msg, &quot;程序恢复啦。。&quot;)
  }
 }()

 fmt.Println(&quot;我是函数funB()..&quot;)
 defer myprint(&quot;defer funB()...1.....&quot;)
 for i := 1; i &lt;= 10; i++ {
  fmt.Println(&quot;i:&quot;, i)
  if i == 5 {
   //让程序中断
   panic(&quot;funB函数,恐慌了&quot;)
  }
 }
 //当外围函数的代码中发生了运行恐慌，只有其中所有的已经`defer`的函数全部都执行完毕后，
 //该运行恐慌才会真正被扩展至调用处。
 defer myprint(&quot;defer funB():2.....&quot;)
}
</code></pre>
<h2 id="什么时候使用错误异常"><a class="header" href="#什么时候使用错误异常">什么时候使用错误/异常</a></h2>
<p>什么情况下用错误表达，什么情况下用异常表达，就得有一套规则，否则很容易出现一切皆错误或一切皆异常的情况。<br />
以下给出异常处理的作用域（场景）:</p>
<blockquote>
<ol>
<li>空指针引用</li>
<li>下标越界</li>
<li>除数为 0</li>
<li>不应该出现的分支，比如 default</li>
<li>输入不应该引起函数错误</li>
</ol>
</blockquote>
<p>其他场景我们使用错误处理，这使得我们的函数接口很精炼。对于异常，我们可以选择在一个合适的上游去 <code>recover()</code> .并打印堆栈信息，使得部署后的程序不会终止。</p>
<h2 id="偶然异常重试机制"><a class="header" href="#偶然异常重试机制">偶然异常重试机制</a></h2>
<p>如果错误的发生是偶然性的，或由不可预知的问题导致的。一个明智的选择是重新尝试失败的操作。在重试时，我们需要限制重试的 <strong>时间间隔</strong> 或重试的 <strong>次数</strong>，防止无限制的重试。</p>
<pre><code class="language-go">func WaitForServer(url string) error {
  const timeout = 1 * time.Minute
  deadline := time.Now().Add(timeout)  //设定异常最大重试时间

  for tries := 0; time.Now().Before(deadline); tries++ {
    _, err := http.Head(url)
    if err == nil {
      return nil // success
    }
    log.Printf(&quot;server not responding (%s);retrying…&quot;, err)
    time.Sleep(time.Second &lt;&lt; uint(tries)) // exponential back-off
  }

  return fmt.Errorf(&quot;server %s failed to respond after %s&quot;, url, timeout)
}
</code></pre>
<h2 id="无法运行的重大错误"><a class="header" href="#无法运行的重大错误">无法运行的重大错误</a></h2>
<p>如果错误发生后，程序无法继续运行，我们就可以采用第三种策略：输出错误信息并结束程序。需要注意的是，这种策略只应在 main 中执行。对库函数而言，<strong>应仅向上传播错误</strong>，除非该错误意味着程序内部包含不一致性，即遇到了 bug，才能在库函数中结束程序。</p>
<p>log 包中的所有函数会为没有换行符的字符串增加换行符。</p>
<pre><code class="language-go">// (In function main.)
if err := WaitForServer(url); err != nil {
  // fmt.Fprintf(os.Stderr, &quot;Site is down: %v\n&quot;, err)
  log.Fatalf(&quot;Site is down: %v\n&quot;, err)
  os.Exit(1)
}
</code></pre>
<p>只需要输出错误信息就足够了，不需要中断程序的运行。</p>
<pre><code class="language-go">log.Printf(&quot;ping failed: %v; networking disabled&quot;,err)
</code></pre>
<p>或者向标准错误流输出错误信息。</p>
<pre><code class="language-go">fmt.Fprintf(os.Stderr, &quot;ping failed: %v; networking disabled\n&quot;, err)
</code></pre>
<h2 id="文件结尾错误eof"><a class="header" href="#文件结尾错误eof">文件结尾错误（EOF）</a></h2>
<p>读取文件时，调用者会重复的读取固定大小的数据直到文件结束，io 包保证任何由文件结束引起的读取失败都返回同一个错误—— <code>io.EOF</code>.</p>
<pre><code class="language-go">// 标准输入中读取字符，以及判断文件结束。
in := bufio.NewReader(os.Stdin)
for {
  r, _, err := in.ReadRune()
  if err == io.EOF {
    break // finished reading
  }
  if err != nil {
    return fmt.Errorf(&quot;read failed:%v&quot;, err)
  }
  // ...use r…
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../博客文章/_posts/Golang/Golang-project-and-gomod-note.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../../博客文章/_posts/Golang/Golang-method-note.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../博客文章/_posts/Golang/Golang-project-and-gomod-note.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../../博客文章/_posts/Golang/Golang-method-note.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../../elasticlunr.min.js"></script>
        <script src="../../../mark.min.js"></script>
        <script src="../../../searcher.js"></script>

        <script src="../../../clipboard.min.js"></script>
        <script src="../../../highlight.js"></script>
        <script src="../../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
